# 238. Product of Array Except Self

## Description

See [https://leetcode.com/problems/product-of-array-except-self/](https://leetcode.com/problems/product-of-array-except-self/)

## Solution

For an input array \[1,2,3,4] the output array will be calculated as follows:

index 0 = 2 \* 3 \* 4

index 1 = 1 \* 3 \* 4

index 2 = 1 \* 2 \* 4

index 3 = 1 \* 2 \* 3

Result is \[24, 12, 8, 6]

Another way to get the result is to multiply forward, multiply backward and then multiply the two results together.

Multiply forward:

\[1, 1 \* nums\[0], 1 \* nums\[0] \* nums\[1], 1 \* nums\[0] \* nums\[1] \* nums\[2]]

Multiply backwards:

\[1 \* nums\[3] \* nums\[2] \* nums\[1], 1 \* nums\[3] \* nums\[2], 1 \* nums\[3], 1]

Then multiply together:

Example:

input = \[1, 2, 3, 4]

Multiply forward:

forward = \[1, 1\*1, 1 \* 1 \* 2, 1 \* 1 \* 2 \* 3]

forward = \[1, 1, 2, 6]

Multiply backward:

backward = \[1 \* 4 \* 3 \* 2, 1 \* 4 \* 3, 1 \* 4, 1]

backward = \[24, 12, 4, 1]

Multiply the two together:

result = \[24, 12, 8, 6]

The question asks for an optimal solution of "_Can you solve the problem in O(1) extra space complexity? (The output array does not count as extra space for space complexity analysis.)_"

For this solution, the answer array is initialized with ones. The result of multiply forward and back are stored in the answer array.

```python
class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        # initialize the answer array with 1s
        answer = [1] * len(nums)
        for i in range(1, len(nums)):
            answer[i] = answer[i - 1] * nums[i - 1]

        tally = 1
        for i in range(len(nums) - 2, -1, -1):
            tally *= nums[i + 1]
            answer[i] = answer[i] * tally
        return answer
```
